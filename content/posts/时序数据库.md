---
title: "时序数据库"
date: 2022-04-23T21:10:03+08:00
draft: true
tags: ["DB"]
categories: ["中间件"]
summary: 时序数据库
typora-root-url: ../../static
---

## 背景

- 时序数据库产品的发明都是为了解决传统关系型数据库在时序数据存储和分析上的不足和缺陷
- 

### 特点

- 基本都是插入，没有更新的需求
- 数据基本都有时间属性，随着时间推移产生新的数据
- 数据量、写入量都很大

## 问题

### 关系型DB的问题

- 存储成本大：对于时序数据压缩不佳，需占用大量机器资源；
- 维护成本高：单机系统，需要在上层人工的分库分表，维护成本高；
- 写入吞吐低：单机写入吞吐低，很难满足时序数据千万级的写入压力；
- 查询性能差：适用于交易处理，海量数据的聚合分析性能差。

### TSDB需要解决

- 每秒十万、百万级的时序数据写入
- 每秒对亿级数据的分组、聚合运算
- 海量数据存储的成本问题

### TSDB的处理手段

- 存储成本：利用时间递增、维度重复、指标平滑变化的特性，合理选择编码压缩算法，提高数据压缩比；
  通过预降精度，对历史数据做聚合，节省存储空间。
- 高并发写入：批量写入数据，降低网络开销；数据先写入内存，再周期性的dump为不可变的文件存储。
- 低查询延时，高查询并发：优化常见的查询模式，通过索引等技术降低查询延时；通过缓存、routing等技术提高查询并发。

## 参考

- https://zhuanlan.zhihu.com/p/100146332
- https://zhuanlan.zhihu.com/p/81679767
- https://www.helloworld.net/p/1132048613
- http://dockone.io/article/347688
- https://einverne.github.io/post/2020/04/prometheus-monitoring-system-and-tsdb.html